<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
    $(function(){
        window.setInterval(function(){
            updateStatus()
        },3000)
    })
    function updateStatus(){
        $.ajax({
          url: "/",
          type: 'GET',
         dataType:'json',
         success: function (data){
            $(status).replaceWith(data)
         }
        });
    }
</script>

<div id='status'>
    <table>
        <tr>
            <th>#</th>
            <th>Direction</th>
            <th>Date Created</th>
            <th>Date Sent</th>
            <th>Error Code</th>
            <th>Error Message</th>
            <th>From</th>
            <th>To</th>
            <th>Status</th>
            <th>Cost</th>
            <th>Body</th>
        </tr>
    {% for x in data %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ x.direction }}</td>
            <td>{{ x.date_created }}</td>
            <td>{{ x.date_sent }}</td>
            <td>{{ x.error_code }}</td>
            <td>{{ x.error_message }}</td>
            <td>{{ x.from_ }}</td>
            <td>{{ x.to }}</td>
            <td>{{ x.status }}</td>
            <td>{{ x.price }} {{ x.price_unit }}</td>
            <td>{{ x.body }}</td>
        </tr>
    {% endfor %}
    </table>
</div>




<!--

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Status</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>
        $(function(){
            window.setInterval(function(){
                updateStatus()
            },3000)
        })
        function updateStatus(){
            $.ajax({
              url: "/update_status",
              type: 'POST',
             dataType:'json',
             success: function (data){
                $(status).replaceWith(data)
             }
            });
        }
    </script>

</head>
<body>
    <h1>Message has been: </h1>
<div id='status'>
    {{ text }}

    <table>
        <tr>
            <th>#</th>
            <th>Direction</th>
            <th>Date Created</th>
            <th>Date Sent</th>
            <th>Error Code</th>
            <th>Error Message</th>
            <th>From</th>
            <th>To</th>
            <th>Status</th>
            <th>Cost</th>
            <th>Body</th>
        </tr>
    {% for x in data %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ x.direction }}</td>
            <td>{{ x.date_created }}</td>
            <td>{{ x.date_sent }}</td>
            <td>{{ x.error_code }}</td>
            <td>{{ x.error_message }}</td>
            <td>{{ x.from_ }}</td>
            <td>{{ x.to }}</td>
            <td>{{ x.status }}</td>
            <td>{{ x.price }} {{ x.price_unit }}</td>
            <td>{{ x.body }}</td>
        </tr>
    {% endfor %}
    </table>

</div>

</body>
</html>   
 -->